{"ast":null,"code":"import axios from'axios';import{LOGIN_SUCCESS,LOGIN_FAIL,USER_LOADED_SUCCESS,USER_LOADED_FAIL}from'../actions/types';export const load_user=()=>async dispatch=>{if(localStorage.getItem('access')){const config={headers:{'Content-Type':'application/json','Authorization':\"JWT \".concat(localStorage.getItem('access')),'Accept':'application/json'}};try{const res=await axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/auth/users/\"),config);dispatch({type:USER_LOADED_SUCCESS,payload:res.data});dispatch(load_user());}catch(err){dispatch({type:USER_LOADED_FAIL});}}else{dispatch({type:USER_LOADED_FAIL});}};export const login=(email,password)=>async dispatch=>{const config={headers:{'Content-Type':'application/json'}};const body=JSON.stringify({email,password});try{const res=await axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/auth/jwt/create/\"),body,config);dispatch({type:LOGIN_SUCCESS,payload:res.data});dispatch(load_user());}catch(err){dispatch({type:LOGIN_FAIL});}};","map":{"version":3,"names":["axios","LOGIN_SUCCESS","LOGIN_FAIL","USER_LOADED_SUCCESS","USER_LOADED_FAIL","load_user","dispatch","localStorage","getItem","config","headers","concat","res","get","process","env","REACT_APP_API_URL","type","payload","data","err","login","email","password","body","JSON","stringify","post"],"sources":["C:/Users/joaob/OneDrive/Documents/Projects/tigrim/frontend/src/actions/auth.jsx"],"sourcesContent":["import axios from 'axios';\r\nimport {\r\n    LOGIN_SUCCESS,\r\n    LOGIN_FAIL,\r\n    USER_LOADED_SUCCESS,\r\n    USER_LOADED_FAIL,\r\n} from '../actions/types'\r\n\r\nexport const load_user = () => async dispatch => {\r\n    if (localStorage.getItem('access')) {\r\n        const config = {\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `JWT ${localStorage.getItem('access')}`,\r\n                'Accept': 'application/json'\r\n            }\r\n        };\r\n\r\n        try{\r\n            const res = await axios.get(`${process.env.REACT_APP_API_URL}/auth/users/`, config);\r\n    \r\n            dispatch({\r\n                type: USER_LOADED_SUCCESS,\r\n                payload: res.data\r\n            });\r\n    \r\n            dispatch(load_user());\r\n        } catch (err) {\r\n            dispatch({\r\n                type: USER_LOADED_FAIL,\r\n            });\r\n        }\r\n    } else{\r\n        dispatch({\r\n            type: USER_LOADED_FAIL,\r\n        });\r\n    \r\n    }\r\n};\r\n\r\nexport const login = (email, password) => async dispatch => {\r\n    const config = {\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        }\r\n    };\r\n\r\n    const body = JSON.stringify({ email, password });\r\n\r\n    try{\r\n        const res = await axios.post(`${process.env.REACT_APP_API_URL}/auth/jwt/create/`, body, config);\r\n\r\n        dispatch({\r\n            type: LOGIN_SUCCESS,\r\n            payload: res.data\r\n        });\r\n\r\n        dispatch(load_user());\r\n    } catch (err) {\r\n        dispatch({\r\n            type: LOGIN_FAIL,\r\n        })\r\n    }\r\n};"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OACIC,aAAa,CACbC,UAAU,CACVC,mBAAmB,CACnBC,gBAAgB,KACb,kBAAkB,CAEzB,MAAO,MAAM,CAAAC,SAAS,CAAGA,CAAA,GAAM,KAAM,CAAAC,QAAQ,EAAI,CAC7C,GAAIC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,CAAE,CAChC,KAAM,CAAAC,MAAM,CAAG,CACXC,OAAO,CAAE,CACL,cAAc,CAAE,kBAAkB,CAClC,eAAe,QAAAC,MAAA,CAASJ,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,CAAE,CACxD,QAAQ,CAAE,kBACd,CACJ,CAAC,CAED,GAAG,CACC,KAAM,CAAAI,GAAG,CAAG,KAAM,CAAAZ,KAAK,CAACa,GAAG,IAAAF,MAAA,CAAIG,OAAO,CAACC,GAAG,CAACC,iBAAiB,iBAAgBP,MAAM,CAAC,CAEnFH,QAAQ,CAAC,CACLW,IAAI,CAAEd,mBAAmB,CACzBe,OAAO,CAAEN,GAAG,CAACO,IACjB,CAAC,CAAC,CAEFb,QAAQ,CAACD,SAAS,CAAC,CAAC,CAAC,CACzB,CAAE,MAAOe,GAAG,CAAE,CACVd,QAAQ,CAAC,CACLW,IAAI,CAAEb,gBACV,CAAC,CAAC,CACN,CACJ,CAAC,IAAK,CACFE,QAAQ,CAAC,CACLW,IAAI,CAAEb,gBACV,CAAC,CAAC,CAEN,CACJ,CAAC,CAED,MAAO,MAAM,CAAAiB,KAAK,CAAGA,CAACC,KAAK,CAAEC,QAAQ,GAAK,KAAM,CAAAjB,QAAQ,EAAI,CACxD,KAAM,CAAAG,MAAM,CAAG,CACXC,OAAO,CAAE,CACL,cAAc,CAAE,kBACpB,CACJ,CAAC,CAED,KAAM,CAAAc,IAAI,CAAGC,IAAI,CAACC,SAAS,CAAC,CAAEJ,KAAK,CAAEC,QAAS,CAAC,CAAC,CAEhD,GAAG,CACC,KAAM,CAAAX,GAAG,CAAG,KAAM,CAAAZ,KAAK,CAAC2B,IAAI,IAAAhB,MAAA,CAAIG,OAAO,CAACC,GAAG,CAACC,iBAAiB,sBAAqBQ,IAAI,CAAEf,MAAM,CAAC,CAE/FH,QAAQ,CAAC,CACLW,IAAI,CAAEhB,aAAa,CACnBiB,OAAO,CAAEN,GAAG,CAACO,IACjB,CAAC,CAAC,CAEFb,QAAQ,CAACD,SAAS,CAAC,CAAC,CAAC,CACzB,CAAE,MAAOe,GAAG,CAAE,CACVd,QAAQ,CAAC,CACLW,IAAI,CAAEf,UACV,CAAC,CAAC,CACN,CACJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}