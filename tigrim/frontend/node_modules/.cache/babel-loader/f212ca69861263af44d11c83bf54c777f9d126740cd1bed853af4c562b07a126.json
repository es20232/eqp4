{"ast":null,"code":"import{Avatar,Button,Fab,Modal,styled,TextField,Tooltip,Typography,Stack}from\"@mui/material\";import React,{useState}from\"react\";import{useDispatch}from'react-redux';import{Add as AddIcon}from\"@mui/icons-material\";import{Box}from\"@mui/system\";import imgNone from\"../assets/imgNone.jpg\";import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export const uploadPost=(image,description)=>async dispatch=>{const config={headers:{'Content-Type':'multipart/form-data'}};// Criar um objeto FormData para enviar os dados do formulário\nconst formData=new FormData();formData.append('image',image);formData.append('description',description);try{const res=await axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"posts/\"),formData,config);// Aqui você pode despachar uma ação de sucesso e lidar com a resposta do backend, se necessário\ndispatch({type:'UPLOAD_POST_SUCCESS',payload:res.data});}catch(error){// Se houver um erro, você pode despachar uma ação de falha e lidar com o erro, se necessário\ndispatch({type:'UPLOAD_POST_FAIL',payload:error.message});}};const SytledModal=styled(Modal)({display:\"flex\",alignItems:\"center\",justifyContent:\"center\"});const UserBox=styled(Box)({display:\"flex\",alignItems:\"center\",gap:\"10px\",marginBottom:\"20px\"});const Add=()=>{const[open,setOpen]=useState(false);const[postPicture,setPostPicture]=useState(imgNone);const[descricao,setDescricao]=useState(\"Sem Descrição\");const dispatch=useDispatch();const handleDescricaoChange=event=>{setDescricao(event.target.value);};const handleSubmit=()=>{dispatch(uploadPost({image:postPicture,comment:descricao}));setOpen(false);};const handleFileChange=event=>{const file=event.target.files[0];if(file){const imageUrl=URL.createObjectURL(file);setPostPicture(imageUrl);}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Tooltip,{onClick:e=>setOpen(true),title:\"Postar\",sx:{position:\"fixed\",bottom:20,left:{xs:\"calc(50% - 25px)\",md:30}},children:/*#__PURE__*/_jsx(Fab,{color:\"primary\",\"aria-label\":\"add\",children:/*#__PURE__*/_jsx(AddIcon,{})})}),/*#__PURE__*/_jsx(SytledModal,{open:open,onClose:e=>setOpen(false),\"aria-labelledby\":\"modal-modal-title\",\"aria-describedby\":\"modal-modal-description\",children:/*#__PURE__*/_jsxs(Box,{bgcolor:\"white\",color:\"text.primary\",p:3,borderRadius:5,sx:{width:600,height:\"auto\"},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",color:\"gray\",textAlign:\"center\",children:\"Criar Post\"}),/*#__PURE__*/_jsxs(UserBox,{children:[/*#__PURE__*/_jsx(Avatar,{src:\"https://images.pexels.com/photos/846741/pexels-photo-846741.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2\",sx:{width:30,height:30}}),/*#__PURE__*/_jsx(Typography,{fontWeight:500,children:\"John Doe\"})]}),/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsxs(Stack,{spacing:2,sx:{display:'flex',alignItems:'center',justifyContent:'center',flexDirection:'column'},children:[/*#__PURE__*/_jsx(\"img\",{src:postPicture,alt:\"Imagem selecionada\",style:{width:\"50%\",height:\"50%\"}}),/*#__PURE__*/_jsx(\"input\",{accept:\"image/*\",style:{display:\"none\"},id:\"contained-button-file\",type:\"file\",onChange:handleFileChange}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"contained-button-file\",children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",component:\"span\",children:\"Escolher Imagem\"})})]})}),/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsx(TextField,{sx:{width:\"100%\",marginTop:'10px'},id:\"standard-multiline-static\",multiline:true,rows:3,placeholder:\"Descri\\xE7\\xE3o\",variant:\"standard\",value:descricao,onChange:handleDescricaoChange})}),/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"contained\",sx:{marginTop:'10px'},onClick:handleSubmit,children:\"Postar\"})]})})]});};export default Add;","map":{"version":3,"names":["Avatar","Button","Fab","Modal","styled","TextField","Tooltip","Typography","Stack","React","useState","useDispatch","Add","AddIcon","Box","imgNone","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","uploadPost","image","description","dispatch","config","headers","formData","FormData","append","res","post","concat","process","env","REACT_APP_API_URL","type","payload","data","error","message","SytledModal","display","alignItems","justifyContent","UserBox","gap","marginBottom","open","setOpen","postPicture","setPostPicture","descricao","setDescricao","handleDescricaoChange","event","target","value","handleSubmit","comment","handleFileChange","file","files","imageUrl","URL","createObjectURL","children","onClick","e","title","sx","position","bottom","left","xs","md","color","onClose","bgcolor","p","borderRadius","width","height","variant","textAlign","src","fontWeight","spacing","flexDirection","alt","style","accept","id","onChange","htmlFor","component","marginTop","multiline","rows","placeholder","fullWidth"],"sources":["C:/Users/guigi/OneDrive/Documentos/GitHub/eqp4-final/tigrim/frontend/src/components/Add.jsx"],"sourcesContent":["import {\r\n  Avatar,\r\n  Button,\r\n  Fab,\r\n  Modal,\r\n  styled,\r\n  TextField,\r\n  Tooltip,\r\n  Typography,\r\n  Stack,\r\n} from \"@mui/material\";\r\nimport React, { useState } from \"react\";\r\nimport { useDispatch } from 'react-redux';\r\nimport { Add as AddIcon } from \"@mui/icons-material\";\r\nimport { Box } from \"@mui/system\";\r\nimport imgNone from \"../assets/imgNone.jpg\"\r\nimport axios from 'axios';\r\n\r\nexport const uploadPost = (image, description) => async dispatch => {\r\n  const config = {\r\n      headers: {\r\n          'Content-Type': 'multipart/form-data'\r\n      }\r\n  };\r\n\r\n  // Criar um objeto FormData para enviar os dados do formulário\r\n  const formData = new FormData();\r\n  formData.append('image', image);\r\n  formData.append('description', description);\r\n\r\n  try {\r\n      const res = await axios.post(`${process.env.REACT_APP_API_URL}posts/`, formData, config);\r\n\r\n      // Aqui você pode despachar uma ação de sucesso e lidar com a resposta do backend, se necessário\r\n      dispatch({ type: 'UPLOAD_POST_SUCCESS', payload: res.data });\r\n\r\n  } catch (error) {\r\n      // Se houver um erro, você pode despachar uma ação de falha e lidar com o erro, se necessário\r\n      dispatch({ type: 'UPLOAD_POST_FAIL', payload: error.message });\r\n  }\r\n};\r\n\r\n\r\nconst SytledModal = styled(Modal)({\r\n  display: \"flex\",\r\n  alignItems: \"center\",\r\n  justifyContent: \"center\",\r\n});\r\n\r\nconst UserBox = styled(Box)({\r\n  display: \"flex\",\r\n  alignItems: \"center\",\r\n  gap: \"10px\",\r\n  marginBottom: \"20px\",\r\n});\r\n\r\nconst Add = () => {\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const [postPicture, setPostPicture] = useState(imgNone);\r\n  const [descricao, setDescricao] = useState(\"Sem Descrição\");\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const handleDescricaoChange = (event) => {\r\n    setDescricao(event.target.value);\r\n  };\r\n\r\n  const handleSubmit = () => {\r\n    dispatch(uploadPost({ image: postPicture, comment: descricao }));\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleFileChange = (event) => {\r\n    const file = event.target.files[0];\r\n\r\n    if (file) {\r\n      const imageUrl = URL.createObjectURL(file);\r\n      setPostPicture(imageUrl);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Tooltip\r\n        onClick={(e) => setOpen(true)}\r\n        title=\"Postar\"\r\n        sx={{\r\n          position: \"fixed\",\r\n          bottom: 20,\r\n          left: { xs: \"calc(50% - 25px)\", md: 30 },\r\n        }}\r\n      >\r\n        <Fab color=\"primary\" aria-label=\"add\">\r\n          <AddIcon />\r\n        </Fab>\r\n      </Tooltip>\r\n      <SytledModal\r\n        open={open}\r\n        onClose={(e) => setOpen(false)}\r\n        aria-labelledby=\"modal-modal-title\"\r\n        aria-describedby=\"modal-modal-description\"\r\n      >\r\n        <Box\r\n          bgcolor={\"white\"}\r\n          color={\"text.primary\"}\r\n          p={3}\r\n          borderRadius={5}\r\n          sx={{ width: 600, height: \"auto\"}}\r\n        >\r\n          <Typography variant=\"h5\" color=\"gray\" textAlign=\"center\">\r\n            Criar Post\r\n          </Typography>\r\n          <UserBox>\r\n            <Avatar\r\n              src=\"https://images.pexels.com/photos/846741/pexels-photo-846741.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2\"\r\n              sx={{ width: 30, height: 30 }}\r\n            />\r\n            <Typography fontWeight={500}>\r\n              John Doe\r\n            </Typography>\r\n          </UserBox>\r\n          <Box >\r\n            <Stack spacing={2} \r\n              sx={{  display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              flexDirection: 'column',\r\n              }}>\r\n              <img\r\n                src={postPicture}\r\n                alt=\"Imagem selecionada\"\r\n                style={{ width: \"50%\", height: \"50%\" }}\r\n              />\r\n              <input\r\n                accept=\"image/*\"\r\n                style={{ display: \"none\" }}\r\n                id=\"contained-button-file\"\r\n                type=\"file\"\r\n                onChange={handleFileChange}\r\n                />\r\n              <label htmlFor=\"contained-button-file\">\r\n                <Button variant=\"contained\" component=\"span\">\r\n                  Escolher Imagem\r\n                </Button>\r\n              </label>\r\n            </Stack>\r\n          </Box>\r\n          \r\n          <Box>\r\n            <TextField\r\n              sx={{ width: \"100%\", marginTop: '10px'}}\r\n              id=\"standard-multiline-static\"\r\n              multiline\r\n              rows={3}\r\n              placeholder=\"Descrição\"\r\n              variant=\"standard\"\r\n              value={descricao}\r\n              onChange={handleDescricaoChange}\r\n            />\r\n          </Box>\r\n          \r\n          <Button fullWidth variant=\"contained\" sx={{ marginTop: '10px' }} onClick={handleSubmit}>Postar</Button>\r\n        </Box>\r\n      </SytledModal>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Add;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}