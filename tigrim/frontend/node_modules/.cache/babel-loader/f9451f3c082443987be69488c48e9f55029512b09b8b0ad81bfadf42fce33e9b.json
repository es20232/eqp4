{"ast":null,"code":"import{Avatar,Button,Fab,Modal,styled,TextField,Tooltip,Typography,Stack}from\"@mui/material\";import React,{useState}from\"react\";import{useDispatch}from'react-redux';import{Add as AddIcon}from\"@mui/icons-material\";import{Box}from\"@mui/system\";import imgNone from\"../assets/imgNone.jpg\";import{uploadPost}from\"../actions/postActions\";import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const SytledModal=styled(Modal)({display:\"flex\",alignItems:\"center\",justifyContent:\"center\"});const UserBox=styled(Box)({display:\"flex\",alignItems:\"center\",gap:\"10px\",marginBottom:\"20px\"});const Add=()=>{const[open,setOpen]=useState(false);const[postPicture,setPostPicture]=useState(imgNone);const[description,setDescription]=useState(\"Sem Descrição\");const dispatch=useDispatch();const handleDescriptionChange=event=>{setDescription(event.target.value);};const handleSubmit=async()=>{const formData=new FormData();formData.append('image',postPicture);formData.append('description',description);const login=async(email,password)=>{try{const response=await axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/auth/jwt/create/\"),{email,password});const token=response.data.access;// Extrai o token JWT da resposta\nsessionStorage.setItem('authorization',\"Bearer \".concat(token));// Armazena o token no sessionStorage\n// Outras lógicas após o login, se necessário\n}catch(error){console.error(\"Error logging in:\",error);}};try{const token=sessionStorage.getItem('authorization');// Obtenha o token JWT do sessionStorage\nif(!token){throw new Error('Token JWT não encontrado');}const res=await axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/posts/\"),formData,{headers:{'Content-Type':'multipart/form-data','Authorization':token// Inclua o token JWT nos cabeçalhos da requisição\n}});dispatch(uploadPost(postPicture,description));setOpen(false);}catch(error){console.error(\"Error uploading post:\",error);}};const handleFileChange=event=>{const file=event.target.files[0];if(file){const imageUrl=URL.createObjectURL(file);setPostPicture(imageUrl);}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Tooltip,{onClick:()=>setOpen(true),title:\"Postar\",sx:{position:\"fixed\",bottom:20,left:{xs:\"calc(50% - 25px)\",md:30}},children:/*#__PURE__*/_jsx(Fab,{color:\"primary\",\"aria-label\":\"add\",children:/*#__PURE__*/_jsx(AddIcon,{})})}),/*#__PURE__*/_jsx(SytledModal,{open:open,onClose:()=>setOpen(false),\"aria-labelledby\":\"modal-modal-title\",\"aria-describedby\":\"modal-modal-description\",children:/*#__PURE__*/_jsxs(Box,{bgcolor:\"white\",color:\"text.primary\",p:3,borderRadius:5,sx:{width:600,height:\"auto\"},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",color:\"gray\",textAlign:\"center\",children:\"Criar Post\"}),/*#__PURE__*/_jsxs(UserBox,{children:[/*#__PURE__*/_jsx(Avatar,{src:\"https://images.pexels.com/photos/846741/pexels-photo-846741.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2\",sx:{width:30,height:30}}),/*#__PURE__*/_jsx(Typography,{fontWeight:500,children:\"John Doe\"})]}),/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsxs(Stack,{spacing:2,sx:{display:'flex',alignItems:'center',justifyContent:'center',flexDirection:'column'},children:[/*#__PURE__*/_jsx(\"img\",{src:postPicture,alt:\"Imagem selecionada\",style:{width:\"50%\",height:\"50%\"}}),/*#__PURE__*/_jsx(\"input\",{accept:\"image/*\",style:{display:\"none\"},id:\"contained-button-file\",type:\"file\",onChange:handleFileChange}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"contained-button-file\",children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",component:\"span\",children:\"Escolher Imagem\"})})]})}),/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsx(TextField,{sx:{width:\"100%\",marginTop:'10px'},id:\"standard-multiline-static\",multiline:true,rows:3,placeholder:\"Descri\\xE7\\xE3o\",variant:\"standard\",value:description,onChange:handleDescriptionChange})}),/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"contained\",sx:{marginTop:'10px'},onClick:handleSubmit,children:\"Postar\"})]})})]});};export default Add;","map":{"version":3,"names":["Avatar","Button","Fab","Modal","styled","TextField","Tooltip","Typography","Stack","React","useState","useDispatch","Add","AddIcon","Box","imgNone","uploadPost","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SytledModal","display","alignItems","justifyContent","UserBox","gap","marginBottom","open","setOpen","postPicture","setPostPicture","description","setDescription","dispatch","handleDescriptionChange","event","target","value","handleSubmit","formData","FormData","append","login","email","password","response","post","concat","process","env","REACT_APP_API_URL","token","data","access","sessionStorage","setItem","error","console","getItem","Error","res","headers","handleFileChange","file","files","imageUrl","URL","createObjectURL","children","onClick","title","sx","position","bottom","left","xs","md","color","onClose","bgcolor","p","borderRadius","width","height","variant","textAlign","src","fontWeight","spacing","flexDirection","alt","style","accept","id","type","onChange","htmlFor","component","marginTop","multiline","rows","placeholder","fullWidth"],"sources":["C:/Users/guigi/OneDrive/Documentos/GitHub/eqp4-final/tigrim/frontend/src/components/Add.jsx"],"sourcesContent":["import {\r\n  Avatar,\r\n  Button,\r\n  Fab,\r\n  Modal,\r\n  styled,\r\n  TextField,\r\n  Tooltip,\r\n  Typography,\r\n  Stack,\r\n} from \"@mui/material\";\r\nimport React, { useState } from \"react\";\r\nimport { useDispatch } from 'react-redux';\r\nimport { Add as AddIcon } from \"@mui/icons-material\";\r\nimport { Box } from \"@mui/system\";\r\nimport imgNone from \"../assets/imgNone.jpg\";\r\nimport { uploadPost } from \"../actions/postActions\";\r\nimport axios from 'axios';\r\n\r\nconst SytledModal = styled(Modal)({\r\n  display: \"flex\",\r\n  alignItems: \"center\",\r\n  justifyContent: \"center\",\r\n});\r\n\r\nconst UserBox = styled(Box)({\r\n  display: \"flex\",\r\n  alignItems: \"center\",\r\n  gap: \"10px\",\r\n  marginBottom: \"20px\",\r\n});\r\n\r\nconst Add = () => {\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const [postPicture, setPostPicture] = useState(imgNone);\r\n  const [description, setDescription] = useState(\"Sem Descrição\");\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const handleDescriptionChange = (event) => {\r\n    setDescription(event.target.value);\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    const formData = new FormData();\r\n    formData.append('image', postPicture);\r\n    formData.append('description', description);\r\n\r\n    const login = async (email, password) => {\r\n      try {\r\n        const response = await axios.post(`${process.env.REACT_APP_API_URL}/auth/jwt/create/`, { email, password });\r\n        const token = response.data.access; // Extrai o token JWT da resposta\r\n        sessionStorage.setItem('authorization', `Bearer ${token}`); // Armazena o token no sessionStorage\r\n        // Outras lógicas após o login, se necessário\r\n      } catch (error) {\r\n        console.error(\"Error logging in:\", error);\r\n      }\r\n    };\r\n  \r\n    try {\r\n      const token = sessionStorage.getItem('authorization'); // Obtenha o token JWT do sessionStorage\r\n      if (!token) {\r\n        throw new Error('Token JWT não encontrado');\r\n      }\r\n  \r\n      const res = await axios.post(`${process.env.REACT_APP_API_URL}/posts/`, formData, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data',\r\n          'Authorization': token // Inclua o token JWT nos cabeçalhos da requisição\r\n        }\r\n      });\r\n  \r\n      dispatch(uploadPost(postPicture, description));\r\n      setOpen(false);\r\n    } catch (error) {\r\n      console.error(\"Error uploading post:\", error);\r\n    }\r\n  };\r\n\r\n  const handleFileChange = (event) => {\r\n    const file = event.target.files[0];\r\n\r\n    if (file) {\r\n      const imageUrl = URL.createObjectURL(file);\r\n      setPostPicture(imageUrl);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Tooltip\r\n        onClick={() => setOpen(true)}\r\n        title=\"Postar\"\r\n        sx={{\r\n          position: \"fixed\",\r\n          bottom: 20,\r\n          left: { xs: \"calc(50% - 25px)\", md: 30 },\r\n        }}\r\n      >\r\n        <Fab color=\"primary\" aria-label=\"add\">\r\n          <AddIcon />\r\n        </Fab>\r\n      </Tooltip>\r\n      <SytledModal\r\n        open={open}\r\n        onClose={() => setOpen(false)}\r\n        aria-labelledby=\"modal-modal-title\"\r\n        aria-describedby=\"modal-modal-description\"\r\n      >\r\n        <Box\r\n          bgcolor={\"white\"}\r\n          color={\"text.primary\"}\r\n          p={3}\r\n          borderRadius={5}\r\n          sx={{ width: 600, height: \"auto\"}}\r\n        >\r\n          <Typography variant=\"h5\" color=\"gray\" textAlign=\"center\">\r\n            Criar Post\r\n          </Typography>\r\n          <UserBox>\r\n            <Avatar\r\n              src=\"https://images.pexels.com/photos/846741/pexels-photo-846741.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2\"\r\n              sx={{ width: 30, height: 30 }}\r\n            />\r\n            <Typography fontWeight={500}>\r\n              John Doe\r\n            </Typography>\r\n          </UserBox>\r\n          <Box >\r\n            <Stack spacing={2} \r\n              sx={{  display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              flexDirection: 'column',\r\n              }}>\r\n              <img\r\n                src={postPicture}\r\n                alt=\"Imagem selecionada\"\r\n                style={{ width: \"50%\", height: \"50%\" }}\r\n              />\r\n              <input\r\n                accept=\"image/*\"\r\n                style={{ display: \"none\" }}\r\n                id=\"contained-button-file\"\r\n                type=\"file\"\r\n                onChange={handleFileChange}\r\n              />\r\n              <label htmlFor=\"contained-button-file\">\r\n                <Button variant=\"contained\" component=\"span\">\r\n                  Escolher Imagem\r\n                </Button>\r\n              </label>\r\n            </Stack>\r\n          </Box>\r\n          \r\n          <Box>\r\n            <TextField\r\n              sx={{ width: \"100%\", marginTop: '10px'}}\r\n              id=\"standard-multiline-static\"\r\n              multiline\r\n              rows={3}\r\n              placeholder=\"Descrição\"\r\n              variant=\"standard\"\r\n              value={description}\r\n              onChange={handleDescriptionChange}\r\n            />\r\n          </Box>\r\n          \r\n          <Button fullWidth variant=\"contained\" sx={{ marginTop: '10px' }} onClick={handleSubmit}>Postar</Button>\r\n        </Box>\r\n      </SytledModal>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Add;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}